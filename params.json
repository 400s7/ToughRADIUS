{"name":"ToughRADIUS","tagline":"ToughRadius is a radius server","body":"# ToughRADIUS  [![Build Status](https://travis-ci.org/talkincode/ToughRADIUS.svg?branch=master)](https://travis-ci.org/talkincode/ToughRADIUS)\r\n\r\nToughRADIUS是一个开源的Radius服务软件，基于BSD许可协议发布。\r\n\r\nToughRADIUS支持标准RADIUS协议，提供完整的AAA实现。支持灵活的策略管理，支持各种主流接入设备并轻松扩展，具备丰富的计费策略支持。\r\n\r\nToughRADIUS支持使用Oracle, MySQL, PostgreSQL, MSSQL等主流数据库存储用户数据，并支持数据缓存，极大的提高了性能。\r\nToughRADIUS支持Windows，Linux，BSD跨平台部署，部署使用简单。\r\n\r\nToughRADIUS提供了RADIUS核心服务引擎与Web管理控制台,用户自助服务三个子系统，核心服务引擎提供高性能的认证计费服务，Web管理控制台提供了界面友好，功能完善的管理功能。用户自助服务系统提供了一个面向终端用户的网上服务渠道。\r\n\r\n[ToughRADIUS网站：http://www.toughradius.net] (http://www.toughradius.net)\r\n\r\n[ToughRADIUS文档: http://docs.toughradius.net/build/html/] (http://docs.toughradius.net/build/html/)\r\n\r\n## Linux下使用脚本在线安装\r\n\r\n请保证你的Linux服务器处于联网状态\r\n\r\n下载脚本::\r\n\r\n    $ curl https://raw.githubusercontent.com/talkincode/ToughRADIUS/master/bin/installer > installer\r\n\r\n    $ chmod +x installer\r\n\r\n执行安装脚本，根据终端提示进行交互::\r\n\r\n    $ ./installer\r\n    \r\n选择你的操作系统类型,默认为centos,注意不同的OS类型的流程提示不一样::\r\n\r\n    [INPUT] - select your os type : 1:centos,2:ubuntu,3:freebsd [1]1\r\n    [INFO] - >> Installation Information\r\n    [INFO] - >> installdir: /usr/local/toughradius\r\n    [INFO] - >> rundir: /var/toughradius\r\n    [INFO] - >> log_dir: /var/toughradius/log\r\n    [INFO] - >> mysql_rundir: /var/toughradius/mysql\r\n    [INFO] - >> my_cnf_path: /var/toughradius/mysql/my.cnf\r\n    [INFO] - >> start install centos depend\r\n    [INFO] - >> run command : yum update -y\r\n    [SUCC] - >> run command : yum update -y success!\r\n    [INFO] - >> run command : yum install -y wget git gcc tcpdump crontabs\r\n    [SUCC] - >> run command : yum install -y wget git gcc tcpdump crontabs success!\r\n    [INFO] - >> run command : yum install -y mariadb-devel mysql-devel\r\n    [SUCC] - >> run command : yum install -y mariadb-devel mysql-devel success!\r\n    [INFO] - >> run command : yum install -y python-devel python-setuptools MySQL-python\r\n    [SUCC] - >> run command : yum install -y python-devel python-setuptools MySQL-python success!\r\n    [INFO] - >> run command : easy_install pip\r\n    [SUCC] - >> run command : easy_install pip success!\r\n    [INFO] - >> run command : pip install supervisor\r\n    [SUCC] - >> run command : pip install supervisor success!\r\n    [INFO] - >> run command : pip install argparse\r\n    [SUCC] - >> run command : pip install argparse success!\r\n    [INFO] - >> run command : pip install pycrypto>=2.6.1\r\n    [SUCC] - >> run command : pip install pycrypto>=2.6.1 success!\r\n    [INFO] - >> run command : pip install zope.interface>=4.1.1\r\n    [SUCC] - >> run command : pip install zope.interface>=4.1.1 success!\r\n    [INFO] - >> run command : pip install Twisted>=14.0.2\r\n    [SUCC] - >> run command : pip install Twisted>=14.0.2 success!\r\n    [INFO] - >> run command : pip install autobahn>=0.9.3-3\r\n    [SUCC] - >> run command : pip install autobahn>=0.9.3-3 success!\r\n    [INFO] - >> run command : pip install SQLAlchemy>=0.9.8\r\n    [SUCC] - >> run command : pip install SQLAlchemy>=0.9.8 success!\r\n    [INFO] - >> run command : pip install DBUtils>=1.1\r\n    [SUCC] - >> run command : pip install DBUtils>=1.1 success!\r\n    [INFO] - >> run command : pip install Mako>=0.9.0\r\n    [SUCC] - >> run command : pip install Mako>=0.9.0 success!\r\n    [INFO] - >> run command : pip install Beaker>=1.6.4\r\n    [SUCC] - >> run command : pip install Beaker>=1.6.4 success!\r\n    [INFO] - >> run command : pip install MarkupSafe>=0.18\r\n    [SUCC] - >> run command : pip install MarkupSafe>=0.18 success!\r\n    [INFO] - >> run command : pip install PyYAML>=3.10\r\n    [SUCC] - >> run command : pip install PyYAML>=3.10 success!\r\n    [INFO] - >> run command : pip install bottle>=0.12.7\r\n    [SUCC] - >> run command : pip install bottle>=0.12.7 success!\r\n    [INFO] - >> run command : pip install tablib>=0.10.0\r\n    [SUCC] - >> run command : pip install tablib>=0.10.0 success!\r\n    [INFO] - >> run command : pip install nose\r\n    [SUCC] - >> run command : pip install nose success!\r\n    [INFO] - >> run command : pip install sh>=1.11\r\n    [SUCC] - >> run command : pip install sh>=1.11 success!\r\n    \r\n选择是否安装mysql，如果你的系统已经安装mysql，或者使用外部mysql数据库，请选择不安装::\r\n\r\n    [INFO] - start install mysql database server\r\n    [INPUT] - install mysql, continue [y/n][n]y\r\n    [INFO] - install mysql\r\n    [INFO] - init mysql config\r\n    [INFO] - write /var/toughradius/mysql/my.cnf\r\n    [INFO] - >> run command : yum install -y mariadb mariadb-server mariadb-devel\r\n    [SUCC] - >> run command : yum install -y mariadb mariadb-server mariadb-devel success!\r\n    [INFO] - starting init mysql database\r\n    [INFO] - >> run command : chown -R mysql:mysql /var/toughradius/mysql\r\n    [SUCC] - >> run command : chown -R mysql:mysql /var/toughradius/mysql success!\r\n    [INFO] - >> run command : mysql_install_db --defaults-file=/var/toughradius/mysql/my.cnf --user=mysql --datadir=/var/toughradius/mysql\r\n    [SUCC] - >> run command : mysql_install_db --defaults-file=/var/toughradius/mysql/my.cnf --user=mysql --datadir=/var/toughradius/mysql  success!\r\n    [INFO] - >> run command : mysqld_safe --defaults-file=/var/toughradius/mysql/my.cnf --user=mysql &\r\n    150220 05:33:21 mysqld_safe Logging to '/var/toughradius/log/mysqld.log'.\r\n    150220 05:33:21 mysqld_safe Starting mysqld daemon with databases from /var/toughradius/mysql\r\n    [INFO] - >> run command : echo '30 1 * * * $(which toughctl) -backupdb -c /var/toughradius/radiusd.conf > /dev/null' > /tmp/backup.cron\r\n    [SUCC] - >> run command : echo '30 1 * * * $(which toughctl) -backupdb -c /var/toughradius/radiusd.conf > /dev/null' > /tmp/backup.cron success!\r\n    [INFO] - >> run command : crontab /tmp/backup.cron\r\n    [SUCC] - >> run command : crontab /tmp/backup.cron success!\r\n    \r\n选择是否创建mysql管理用户，如果不需要，直接跳过::\r\n\r\n    [INFO] - set mysql manage user\r\n    [INPUT] - create a mysql admin user? y/n [n]y\r\n    [INPUT] - set mysql manage username, not root [admin]:\r\n    [INPUT] - set mysql manage passwd, [radius]:\r\n    [INFO] - >> run command : echo \"GRANT ALL ON *.* TO admin@'%' IDENTIFIED BY 'radius' WITH GRANT OPTION;FLUSH PRIVILEGES\" | mysql --defaults-file=/var/toughradius/mysql/my.cnf\r\n    [SUCC] - >> run command : echo \"GRANT ALL ON *.* TO admin@'%' IDENTIFIED BY 'radius' WITH GRANT OPTION;FLUSH PRIVILEGES\" | mysql --defaults-file=/var/toughradius/mysql/my.cnf success!\r\n    [INFO] - show database\r\n    [INFO] - >> run command : echo \"show databases;\" | mysql --defaults-file=/var/toughradius/mysql/my.cnf\r\n    Database\r\n    information_schema\r\n    mysql\r\n    performance_schema\r\n    test\r\n    [INFO] - >> install centos depend done\r\n    \r\n安装ToughRADIUS包，根据你的网络情况，选择软件源镜像::\r\n    \r\n    [INFO] - start fetch ToughRADIUS from git repository\r\n    [INPUT] - select ToughRADIUS mirror [ 1:github 2:oschina 3:coding 4:csdn ][1]:\r\n    [INFO] - >> run command : git clone https://github.com/talkincode/ToughRADIUS.git /usr/local/toughradius\r\n    [SUCC] - >> run command : git clone https://github.com/talkincode/ToughRADIUS.git /usr/local/toughradius success!\r\n    [INFO] - >> run command : pip install -e /usr/local/toughradius\r\n    [SUCC] - >> run command : pip install -e /usr/local/toughradius success!\r\n    [INFO] - >> run command : ln -s $(which toughrad) /etc/init.d/toughrad\r\n    [SUCC] - >> run command : ln -s $(which toughrad) /etc/init.d/toughrad success!\r\n    [INFO] - >> run command : chmod +x /etc/init.d/toughrad\r\n    [SUCC] - >> run command : chmod +x /etc/init.d/toughrad success!\r\n    [INFO] - >> run command : chkconfig --add toughrad\r\n    [SUCC] - >> run command : chkconfig --add toughrad success!\r\n    [INFO] - >> run command : chkconfig toughrad on\r\n    [SUCC] - >> run command : chkconfig toughrad on success!\r\n    [INFO] - >> run command : chmod 754 /usr/lib/systemd/system/toughrad.service\r\n    [SUCC] - >> run command : chmod 754 /usr/lib/systemd/system/toughrad.service success!\r\n    \r\n配置文件生成，根据你的实际环境进行配置::\r\n\r\n    [INFO] - set config...\r\n    [INFO] - set default option\r\n    [INPUT] - set debug [0/1] [0]:\r\n    [INPUT] - time zone [ CST-8 ]:\r\n    [INFO] - set database option\r\n    [INPUT] - database type [mysql]:\r\n    [INPUT] - database host [127.0.0.1]:\r\n    [INPUT] - database port [3306]:\r\n    [INPUT] - database dbname [toughradius]:\r\n    [INPUT] - database user [root]:\r\n    [INPUT] - database passwd []:\r\n    [INPUT] - db pool maxusage [30]:\r\n    [INFO] - set mysql backup ftpserver option\r\n    [INPUT] - backup ftphost [127.0.0.1]:\r\n    [INPUT] - backup ftpport [21]:\r\n    [INPUT] - backup ftpuser [ftpuser]:\r\n    [INPUT] - backup ftppwd [ftppwd]:\r\n    [INFO] - set radiusd option\r\n    [INPUT] - radiusd authport [1812]:\r\n    [INPUT] - radiusd acctport [1813]:\r\n    [INPUT] - radiusd adminport [1815]:\r\n    [INPUT] - radiusd cache_timeout (second) [600]:\r\n    [INFO] - set admin option\r\n    [INPUT] - admin http port [1816]:\r\n    [INFO] - set customer option\r\n    [INPUT] - customer http port [1817]:\r\n    [SUCC] - config done\r\n    \r\n初始化数据库并启动服务::\r\n\r\n    starting create and init database...\r\n    drop database toughradius\r\n    create database toughradius DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci\r\n    commit\r\n    [SUCC] - init db success\r\n    [INFO] - start server...\r\n    [INFO] - >> run command : toughrad start\r\n    [SUCC] - >> run command : toughrad start success!\r\n\r\n    # RUNNING 表示服务已经成功启动\r\n    [INFO] - >> run command : toughrad status\r\n    rad_console                      RUNNING   pid 2148, uptime 0:00:06\r\n    rad_customer                     RUNNING   pid 2147, uptime 0:00:06\r\n    radiusd                          RUNNING   pid 2153, uptime 0:00:05\r\n    [INFO] - done\r\n\r\n\r\n### 进程管理\r\n\r\n通过以上步骤安装完成后，会提供一个进程管理工具 toughrad\r\n\r\n启动ToughRADIUS进程::\r\n\r\n    $ toughrad start\r\n\r\n停止ToughRADIUS进程::\r\n\r\n    $ toughrad stop\r\n\r\n重启ToughRADIUS进程::\r\n\r\n    $ toughrad restart\r\n    \r\n升级ToughRADIUS到最新版本::\r\n\r\n    $ toughrad upgrade    \r\n\r\n启动mysql数据库进程::\r\n\r\n    $ toughrad startdb\r\n\r\n停止mysql数据库进程::\r\n\r\n    $ toughrad stopdb\r\n    \r\n备份ToughRADIUS主数据库,备份路径在/var/toughradius/databak,若要上传至ftp，请配置/var/toughradius/radiusd.json文件中的备份选项::\r\n\r\n    $ toughrad backupdb\r\n\r\n跟踪数据库日志::\r\n\r\n    $ toughrad tracedb\r\n    \r\n跟踪radius日志::\r\n\r\n    $ toughrad tracerad\r\n    \r\n跟踪管理控制台日志::\r\n\r\n    $ toughrad traceadmin\r\n    \r\n跟踪自助服务控制台日志::\r\n\r\n    $ toughrad tracecustomer    \r\n\r\n## 使用Docker镜像 \r\n\r\n在centos7下部署::\r\n\r\n    $ yum install docker\r\n\r\n    $ service docker start\r\n\r\n    $ mkdir /var/toughradius\r\n\r\n    $ docker run -d -v /var/toughradius:/var/toughradius \\\r\n      -p 3306:3306 -p 1812:1812/udp -p 1813:1813/udp \\\r\n      -p 1815:1815 -p 1816:1816 -p 1817:1817\\\r\n      --name toughradius talkincode/centos7-toughradius \r\n\r\n以上指令会在centos7中安装docker工具，并自动下载toughradius镜像以守护进程模式运行。\r\n\r\n运行 docker logs toughradius 即可看到运行日志输出。\r\n\r\n\r\n## web管理控制台的使用\r\n\r\n当安装部署完成后可使用浏览器进入管理控制台进行操作。\r\n\r\n默认地址与端口：http://serverip:1816\r\n    \r\n默认管理员与密码：admin/root\r\n\r\n## 自助服务系统的使用\r\n\r\n自助服务系统运行于一个独立的进程。\r\n\r\n默认地址与端口:http://serverip:1817\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}